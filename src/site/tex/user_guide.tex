%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Kiqo User Guide 
%
% Important note:
% Chapter heading images should have a 2:1 width:height ratio,
% e.g. 920px width and 460px height.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[11pt,fleqn]{book} % Default font size and left-justified equations

\usepackage[top=3cm,bottom=3cm,left=3.2cm,right=3.2cm,headsep=10pt,letterpaper]{geometry} % Page margins

\usepackage{xcolor} % Required for specifying colors by name
\definecolor{ocre}{RGB}{52,177,201} % Define the orange color used for highlighting throughout the book

\usepackage{float}
\usepackage{booktabs}

% Font Settings
\usepackage{avant} % Use the Avantgarde font for headings
%\usepackage{times} % Use the Times font for headings
\usepackage{mathptmx} % Use the Adobe Times Roman as the default text font together with math symbols from the Sym­bol, Chancery and Com­puter Modern fonts

\usepackage{microtype} % Slightly tweak font spacing for aesthetics
\usepackage[utf8]{inputenc} % Required for including letters with accents
\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs

\usepackage{menukeys}

% Bibliography
\usepackage[style=alphabetic,sorting=nyt,sortcites=true,autopunct=true,babel=hyphen,hyperref=true,abbreviate=false,backref=true,backend=biber]{biblatex}
\addbibresource{bibliography.bib} % BibTeX bibliography file
\defbibheading{bibempty}{}

\input{structure} % Insert the commands.tex file which contains the majority of the structure behind the template

\begin{document}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\begingroup
\thispagestyle{empty}
\center{\includegraphics[scale=0.25]{badgecolour}} % Thirsty Goat Badge 
%\AddToShipoutPicture*{\put(0,0){\includegraphics[scale=1.25]{esahubble}}} % Image background
\centering
\vspace*{5cm}
\par\normalfont\fontsize{35}{35}\sffamily\selectfont
\textbf{Kiqo}
{\LARGE A less horrible Agilefant}\par % Book title
\vspace*{1cm}
{\Huge User Guide}\par % Author name
\endgroup

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS
%----------------------------------------------------------------------------------------

\tableofcontents % Print the table of contents itself

%----------------------------------------------------------------------------------------
%	CHAPTER 1
%----------------------------------------------------------------------------------------
\chapter{Introduction}

\section{Kiqo}
Named after New Zealand's most hardy breed of goat, like its namesake, Kiqo is sweet as. Kiqo is an agile project
management tool.

\section{Quick Start}
\begin{itemize}
    \item All items can be created using \menu{file > New > *Item} or by using the keyboard shortcuts which can be found
    in the appendix.
    \item All items can be edited using \keys{\ctrl + E} or by right clicking on the item and selecting edit.
    \item All items can be deleted using \keys{\ctrl + D} or by right clicking on the item and selecting delete.
    \item To save use either \menu{File > Save} or \keys{\ctrl + S}.
    \item To load an existing .json file use either \menu{File > Load} or \keys{\ctrl + O} and select the file using the file chooser.
    \item Undo an action using either \menu{Edit > undo} or \keys{\ctrl + Z}.
    \item Redo an action using either \menu{Edit > redo} or \keys{\ctrl + \shift + Z}.
    \item To revert to the last save point use \menu{File > Revert}.
\end{itemize}

\section{Window Layout}
The main Kiqo workspace is show in figure~\ref{fig:mainwindow}.

\begin{figure}[h]
  \centering
  \includegraphics[scale=0.32]{mainwindow}
  \caption{The main Kiqo window.\label{fig:mainwindow}}
\end{figure}

\pagebreak
By default, the main window is split into two panes. On the left is the sidebar. On the right is the details pane.
To display or hide the sidebar, choose \menu{View > List}. Alternatively, use the keys \keys{\ctrl + L}.

\subsection{Details Pane}


\subsection{Menubar}
Some stuff about the menu bar

\subsection{Sidebar}
There are three ways of changing the view to show relevant information.
\begin{itemize}
  \item From the menu bar, use \menu{View > } and select the elmenet.
  \item From clicking the selection tabs shown in figure 1.3
  \item By using the keyboard shortcuts \keys{\ctrl + 1-4}
\end{itemize}
The items shown in the sidebar are automatically sorted in alphabetical order.

\footnote{On Mac, use the command key \keys{\cmd} in place of \keys{\ctrl}.}


%----------------------------------------------------------------------------------------
%	CHAPTER 2
%----------------------------------------------------------------------------------------
\chapter{Elements}
\section{Organisation}
An organisation is the root element of the heirachy. An organisation contains projects, teams, people and skills.
A new organisation is automatically loaded when kiqo is initailly opened. An existing organisation can also be loaded
from a .json file. To create a new organisation use \menu{File > New > Organisation}. An organisation can be saved using
either \menu{File > Save} or \keys{ctrl + S}.

\section{Projects \& Releases}
\subsection{Create a project}
    \begin{itemize}
        \item From the menu bar, use \menu{File > New... > Project}.
        \item Use the keyboard shortcut \keys{\ctrl + N}.
    \end{itemize}
    You will then be prompted to enter the details of the new project.

    \begin{figure}[h]
        \centering
        \includegraphics[scale=0.32]{newproject}
        \caption{The new project window.\label{newproject}}
    \end{figure}

\subsection{Create a Release}
    \begin{itemize}
        \item To create a release use \menu{File > New... > Release}.
        \item Use the keyboard shortcut \keys{\ctrl + R}.
    \end{itemize}
    The release will be added to the project selected in the creation dialog.
    The releases for a project can be found under the projects releases heading in the tree view.

\section{People \& Skills}
\subsection{People}
A person can be created, saved and edited in the same way as a project
\subsection{Skills}
\begin{itemize}
  \item Adding a new skill to the Project displays the skill in the Skills list view. If a skill exists, by default the
  first skill is shown in the details pane, unless another skill in the list is selected.
  \item Go to the skills selection pane in edit or create person and click the > arrow to add one skill to a person
  or >> to add all existing skills.
  \item In the skills selection pane click the < arrow to remove one skill or << to remove all assigned skills.
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[scale=0.32]{skillsSelectionPane}
  \caption{The skills selection pane.\label{skillsSelectionPane}}
\end{figure}

\section{Teams, Roles \& Allocations}
\subsection{Team Maintenance (including Roles)}
\begin{itemize}
  \item Adding a new team to the Project displays the team in the Teams list view.
  \item The members of the selected team are displayed in the team details pane.
  \item In edit or create team, use the person selection pane and click the > arrow to add one person to a team
  or >> to add all available people.
  \item In the person selection pane, click the < arrow to remove one person or << to remove all assigned people.
  \item Use the radio buttons to nominate a Product Owner, Scrum Master and/or Dev Team members. Only team members who
   posses the relevant skill may be nominated.
\end{itemize}

\subsection{Project Allocation}
\begin{itemize}
  \item Teams can be allocated to projects, with associated dates.
  \item In the project tab a team can be allocated to a project by clicking the 'Allocate Teams'.
  \item Select a team from the from the dropdown list in create Allocation dialog and choose a start and an end date.
  \item Edit an allocation by clicking on a row and then changing the start or end date with the date picker.
  \item Delete an allocation by right clicking on its row and selecting 'Delete Allocation'.
\end{itemize}
\section{Stories \& Backlogs}

\subsection{Story}
\begin{itemize}
  \item Stories can be added to a project and assigned a priority.
  \item The priority must be a integer between 1000 and -1000, inclusive.
\end{itemize}

\subsection{Backlog}
\begin{itemize}
\item Backlogs can be created when there is an existing project and product owner.
\item A dialog prompts a user when they attempt to create a backlog without these.
\item Validation exists within the backlog form to ensure a project and product owner are assigned to a backlog.
\item Stories can be added to a backlog.
\end{itemize}

%----------------------------------------------------------------------------------------
%	CHAPTER 3
%----------------------------------------------------------------------------------------
\chapter{Other sorta stuff}
\section{Report Generation}
The report generator gives the user the ability to generate reports in yaml format (http://yaml.org).
\begin{itemize}
  \item \menu{File > Generate > Status Report} Opens a dialog prompting you for the type of elements to be in the report
  e.g. Projects, Teams, People etc. You can then select which of these elements will be in the report e.g. Team 1 and
  Team 3.
  \item Clicking \keys{Generate Report} Prompts you for a valid save location on the local disk drive.
  \item Clicking \keys{Save} will generate the report and save it to the location set previously.
\end{itemize}

\section{Undo, Redo, Revert}

\section{Validation}



%----------------------------------------------------------------------------------------
%	CHAPTER 4
%----------------------------------------------------------------------------------------
\appendix
\chapter{Appendix}

\section{Keyboard Shortcuts}

\textbf{Note:} On Mac the command key \keys{\cmd} should be used
  in place of \keys{\ctrl}.

\begin{table}[h]
  \renewcommand{\arraystretch}{1.5} % Increase space between rows
  \centering
  \begin{tabular}{lc}
    \toprule
    Action & Shortcut \\
    \midrule
    Create New Project & \keys{\ctrl + N} \\
    Create New Release & \keys{\ctrl + R} \\
    Create New Team & \keys{\ctrl + T} \\
    Create New Person & \keys{\ctrl + P} \\
    Create New Skill & \keys{\ctrl + K} \\
    Create New Story & \keys{\ctrl + Y} \\
    Open Organisation & \keys{\ctrl + O} \\
    Save Organisation & \keys{\ctrl + S} \\
    Save Organisation As & \keys{\ctrl + \shift + S} \\
    Undo & \keys{\ctrl + Z} \\
    Redo & \keys{\ctrl + \shift + Z} \\
    Edit Selected Item & \keys{\ctrl + E} \\
    Delete Selected Item & \keys{\ctrl + D} \\
    Hide/Show List Pane  &  \keys{\ctrl + L} \\
    Switch Tabs & \keys{\ctrl + 1-4} \\
    \bottomrule
  \end{tabular}
  \caption{List of Keyboard Shortcuts}
  \label{tab:shortcuts}
\end{table}

%
%\begin{figure}[H]
%  \centering
%  \includegraphics[scale=0.32]{listView}
%  \caption{The list view.\label{listView}}
%\end{figure}
%
%\subsection{Details Pane}
%\begin{itemize}
%  \item Selecting an item from the list (Person, Project, etc) displays the details about that item in the details pane.
%\end{itemize}
%
%\begin{figure}[H]
%  \centering
%  \includegraphics[scale=0.32]{detailsPane}
%  \caption{The details pane.\label{detailsPane}}
%\end{figure}
%
%\subsection{Revert}
%Revert allows a user to discard all unsaved changes and go back to the state where the project was last saved.
%If a project has not been saved then it reverts back to the state when it was last opened.
%\begin{itemize}
%  \item \menu{File > Revert} Prompts the user to Save As before reverting the project's unsaved changes.
%  \item Functionality exists to undo/redo a revert.
%\end{itemize}
%
%\appendix
%\chapter{Appendix}
%
%\subsection{UX Design}
%\begin{itemize}
%\item Click the arrow inside the tree to expand nodes.
%\end{itemize}
%
%\begin{figure}[H]
%  \centering
%  \includegraphics[scale=0.32]{treeView}
%  \caption{The tree view.\label{treeView}}
%\end{figure}
%
%\subsection{Validation}
%User inputs with red triangles in the top left hand corner (See Figure xyz) show that the field is being validated
%
\end{document}
